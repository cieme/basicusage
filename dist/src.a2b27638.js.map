{"version":3,"sources":["src/day2/03.js","src/index.js"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","obj","val","defineProperty","enumerable","configurable","get","set","newValue","Vue","options","$options","$data","$el","el","document","querySelector","_proxyData","vm","msg","count","console","log"],"mappings":";;ACKA;;;;;;IDLMA;AACJ,oBAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKC,IAAL,CAAUD,IAAV;AACD;;;;yBACIA,MAAM;AAAA;;AACT;AACA,UAAI,CAACA,IAAD,IAAS,QAAOA,IAAP,MAAgB,QAA7B,EAAuC,OAF9B,CAGT;;AACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/B,QAAA,KAAI,CAACC,cAAL,CAAoBN,IAApB,EAA0BK,GAA1B,EAA+BL,IAAI,CAACK,GAAD,CAAnC;AACD,OAFD;AAGD;;;mCACcE,KAAKF,KAAKG,KAAK;AAC5B;AACAN,MAAAA,MAAM,CAACO,cAAP,CAAsBF,GAAtB,EAA2BF,GAA3B,EAAgC;AAC9BK,QAAAA,UAAU,EAAE,IADkB;AAE9BC,QAAAA,YAAY,EAAE,IAFgB;AAG9BC,QAAAA,GAH8B,iBAGxB;AACJ,iBAAOJ,GAAP;AACD,SAL6B;AAM9BK,QAAAA,GAN8B,eAM1BC,QAN0B,EAMhB;AACZ,cAAIA,QAAQ,KAAKN,GAAjB,EAAsB;AACtBA,UAAAA,GAAG,GAAGM,QAAN,CAFY,CAGZ;AACD;AAV6B,OAAhC;AAYD;;;;;;IAEGC;AACJ,eAAYC,OAAZ,EAAqB;AAAA;;AACnB;AACA,SAAKC,QAAL,GAAgBD,OAAO,IAAI,EAA3B;AACA,SAAKE,KAAL,GAAaF,OAAO,CAAChB,IAAR,IAAgB,EAA7B;AACA,SAAKmB,GAAL,GAAW,OAAOH,OAAO,CAACI,EAAf,KAAsB,QAAtB,GAAiCC,QAAQ,CAACC,aAAT,CAAuBN,OAAO,CAACI,EAA/B,CAAjC,GAAsEJ,OAAO,CAACI,EAAzF,CAJmB,CAKnB;;AACA,SAAKG,UAAL,CAAgB,KAAKL,KAArB,EANmB,CAOnB;;;AACA,QAAInB,QAAJ,CAAa,KAAKmB,KAAlB,EARmB,CASnB;AACD;;;;+BACUlB,MAAM;AAAA;;AACf;AACA;AACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/BH,QAAAA,MAAM,CAACO,cAAP,CAAsB,MAAtB,EAA4BJ,GAA5B,EAAiC;AAC/B;AACAK,UAAAA,UAAU,EAAE,IAFmB;AAG/BC,UAAAA,YAAY,EAAE,IAHiB;AAI/BC,UAAAA,GAJ+B,iBAIzB;AACJ,mBAAOZ,IAAI,CAACK,GAAD,CAAX;AACD,WAN8B;AAO/BQ,UAAAA,GAP+B,eAO3BC,QAP2B,EAOjB;AACZ,gBAAIA,QAAQ,KAAKd,IAAI,CAACK,GAAD,CAArB,EAA4B;AAC1B;AACD;;AACDL,YAAAA,IAAI,CAACK,GAAD,CAAJ,GAAYS,QAAZ;AACD;AAZ8B,SAAjC;AAcD,OAfD;AAgBD;;;;;;AAEH,IAAIU,EAAE,GAAG,IAAIT,GAAJ,CAAQ;AACfK,EAAAA,EAAE,QADa;AAEfpB,EAAAA,IAAI,EAAE;AACJyB,IAAAA,GAAG,cADC;AAEJC,IAAAA,KAAK,EAAE;AAFH;AAFS,CAAR,CAAT;AAOAC,OAAO,CAACC,GAAR,CAAYJ,EAAZ,GACA;AACA;AACA;AACA;AACA","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["class Observer {\n  constructor(data) {\n    this.walk(data);\n  }\n  walk(data) {\n    // 1. 判断 data 是否是 对象\n    if (!data || typeof data !== \"object\") return\n    // 2. 遍历data对象所有属性\n    Object.keys(data).forEach(key => {\n      this.defineReactive(data, key, data[key]);\n    })\n  }\n  defineReactive(obj, key, val) {\n    // 为什么传递val  而不是获取\n    Object.defineProperty(obj, key, {\n      enumerable: true,\n      configurable: true,\n      get() {\n        return val\n      },\n      set(newValue) {\n        if (newValue === val) return\n        val = newValue\n        // next 发送通知\n      }\n    })\n  }\n}\nclass Vue {\n  constructor(options) {\n    // 1 通过属性保存选项的数据\n    this.$options = options || {}\n    this.$data = options.data || {}\n    this.$el = typeof options.el === \"string\" ? document.querySelector(options.el) : options.el\n    // 2 data 中成员 转换成 getter 和 setter 注入vue 实例中\n    this._proxyData(this.$data);\n    // 3 调用 observer 对象 监听数据的变化\n    new Observer(this.$data)\n    // 4 调用 compiler 对象 解析指令和差值表达式\n  }\n  _proxyData(data) {\n    //遍历 data 中所有属性\n    //把 data 的属性注入 vue 实例\n    Object.keys(data).forEach(key => {\n      Object.defineProperty(this, key, {\n        // 可遍历,可枚举\n        enumerable: true,\n        configurable: true,\n        get() {\n          return data[key];\n        },\n        set(newValue) {\n          if (newValue === data[key]) {\n            return\n          }\n          data[key] = newValue\n        }\n      })\n    })\n  }\n}\nlet vm = new Vue({\n  el: `#app`,\n  data: {\n    msg: `hellow vue`,\n    count: 10\n  }\n})\nconsole.log(vm)\n// 负责 data 属性 转化为 响应式 数据\n// data 中 某个属性也是对象  把该属性转换成响应式数据\n// 数据变化发送通知\n// walk  遍历 data 所有属性  循环中 会调用 defineReactive\n// defineReactive 定义响应式数据\n\n","// import './day1/01-basicusage'\n// import './day1/02-basicusage'\n// import './day1/03-modules'\n// import './day2/01'\n// import './day2/02'\nimport './day2/03'\n"]}